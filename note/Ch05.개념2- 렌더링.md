## 5.2 ìµœì‹  ë²„ì „ì˜ í° ì°¨ì´ì 

### v12

- í˜ì´ì§€ ë‹¨ìœ„ë¡œ ë Œë”ë§ ë°©ì‹ì„ ê·œì •

- í˜ì´ì§€ ì•ˆì—ì„œ getStaticProps ì‚¬ìš©í•˜ë©´ SSG

- getServerSideProps ì‚¬ìš©í•˜ë©´ SSR

- ì´ëŸ¬í•œ ê²ƒë“¤ì´ í˜ì´ì§€ ë‹¨ìœ„ë¡œ ê·œì •ì´ ë˜ì—ˆë‹¤.

### v13

- í˜ì´ì§€ ë‹¨ìœ„ê°€ ì•„ë‹ˆë¼ Server Component ê°œë…ì´ ë„ì… ë˜ì—ˆë‹¤ (Server Component / Client Component)

  - ì„œë²„ ìƒì—ì„œë§Œ ë™ì‘í•˜ëŠ” ì»´í¬ë„ŒíŠ¸

- 13 ë²„ì „ ë¶€í„°ëŠ” í˜ì´ì§€ ë‹¨ìœ„ê°€ ì•„ë‹ˆë¼ ì»´í¬ë„ŒíŠ¸ ë‹¨ìœ„ë¡œ ë Œë”ë§ ë‹¨ìœ„ë¥¼ ê·œì •

- í•œ í˜ì´ì§€ ì•ˆì—ì„œë„ ì–´ë–¤ ê²ƒì€ ì„œë²„ ì»´í¬ë„ŒíŠ¸, ì–´ë–¤ ê²ƒì€ í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸

- ì´ëŸ° ê²ƒ ì„ì–´ì„œ íš¨ìœ¨ì ìœ¼ë¡œ í˜ì´ì§€ êµ¬ì„±í•  ìˆ˜ ìˆë‹¤

<img src='./images/5-2-1.png'>

- app í´ë” ì•ˆì— ìˆëŠ” ëª¨ë“  ì»´í¬ë„ŒíŠ¸ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ëª¨ë‘ ì„œë²„ ì»´í¬ë„ŒíŠ¸

  - ë³„ë„ë¡œ ì„¤ì •í•˜ì§€ í•˜ì§€ ì•ŠëŠ” ì´ìƒ ëª¨ë‘ ì„œë²„ì—ì„œ ì‹¤í–‰ëœë‹¤

- ì„œë²„ ì»´í¬ë„ŒíŠ¸ì™€ í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸ ì‹¤í–‰ë˜ëŠ” í™˜ê²½ì´ ë‹¤ë¥´ë‹ˆê¹Œ

  - ì„œë²„ ì»´í¬ë„ŒíŠ¸ : ì„œë²„

  - í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸ : í´ë¼ì´ì–¸íŠ¸

- ì„œë¡œ í•  ìˆ˜ ìˆëŠ” ê²ƒê³¼ ì—†ëŠ” ê²ƒì´ ë‹¤ë¥´ë‹¤

---

## 5.3 ì„œë²„ ì»´í¬ë„ŒíŠ¸

- app í´ë” ì•ˆì— ìˆëŠ” ëª¨ë“  ì»´í¬ë„ŒíŠ¸ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ëª¨ë‘ ì„œë²„ ì»´í¬ë„ŒíŠ¸

  - ë³„ë„ë¡œ ì„¤ì •í•˜ì§€ í•˜ì§€ ì•ŠëŠ” ì´ìƒ ëª¨ë‘ ì„œë²„ì—ì„œ ì‹¤í–‰ëœë‹¤

  - ì‹¤ì œë¡œ app/page.tsxì—ì„œ `console.log('hello');` í•˜ë©´, ë¸Œë¼ìš°ì €ê°€ ì•„ë‹Œ í„°ë¯¸ë„ì—ì„œ ì¶œë ¥ëœë‹¤

- ì„œë²„ì—ì„œ ë¹Œë“œê°€ ë ë•Œ ì‹¤í–‰ì´ë˜ê³ , HTML í˜•íƒœë¡œ ë¸Œë¼ìš°ì €ì— ì „ë‹¬ëœë‹¤

  - ë˜ëŠ” fetchingì„ ì‚¬ìš©í•´ì„œ SSRë¡œ í•œë‹¤ë©´ ìš”ì²­ì‹œì— ì„œë²„ì—ì„œ ì‹¤í–‰ëœë‹¤

- ì„œë²„ì—ì„œ ë™ì‘í•˜ê¸° ë•Œë¬¸ì— ë¸Œë¼ìš°ì €ì—ì„œ ì œê³µí•˜ëŠ” apiëŠ” ì‚¬ìš©í•  ìˆ˜ ì—†ê³ 

- ë…¸ë“œ í™˜ê²½ì—ì„œ ì œê³µí•˜ëŠ” ë…¸ë“œ apiëŠ” ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤

```js
// app/page.tsx
import os from 'os' // ë…¸ë“œ API

export default function Home() {
  // ëª¨ë‘ í„°ë¯¸ë„ì—ì„œë§Œ ì¶œë ¥ëœë‹¤
  console.log('hello');
  console.log(os.hostname());
  return <h1>í˜ì´ì§€</h1>;
}
```

- ê·¸ë ‡ê¸° ë•Œë¬¸ì— ìƒíƒœ ê´€ë ¨ëœ ê²ƒ ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤

- ì»´íŒŒì¼ ê´€ë ¨ ì—ëŸ¬ ë°œìƒí•œë‹¤

```js
// app/page.tsx

export default function Home() {
  // ì—ëŸ¬ ë°œìƒ
  const [state, setState] = useState();

  console.log('hello - ì„œë²„ ì»´í¬ë„ŒíŠ¸');
  console.log(os.hostname());
  return <h1>í˜ì´ì§€</h1>;
}
```

- ì„œë²„ ì»´í¬ë„ŒíŠ¸ì™€ í´ë¼ì´ì–¸íŠ¸ì—ì„œ í•  ìˆ˜ ìˆëŠ” ê²ƒê³¼ ì—†ëŠ” ê²ƒ êµ¬ë¶„í•´ì•¼ í•œë‹¤


### Q. Next.jsì˜ ì›¹ ì„œë¹„ìŠ¤ êµ¬ì¡°

- ê°•ì˜ë¥¼ ë“£ë‹¤ë³´ë‹ˆ next.jsë¡œ ì„œë¹„ìŠ¤ì‹œ ì›¹ ì„œë¹„ìŠ¤ì˜ êµ¬ì¡°ê°€ ì˜ë¬¸ì´ ë“­ë‹ˆë‹¤.

- spaì˜ ê²½ìš° ìµœì´ˆ ë¬¸ì„œë¥¼ ì£¼ëŠ” ì„œë²„ì¸ next.jsì„œë²„ì—ì„œ íŒŒì¼ì„ ë°›ì•„ì˜¨ ì´í›„ì—ëŠ” apiì„œë²„ë¡œ ì§ì ‘ í†µì‹ í•˜ê³  ssrì€ ê²½ìš°ì—ëŠ” ë¬¸ì„œë‘ íŒŒì¼ ë°›ì•„ì™€ë„ next.js ì„œë²„ë¥¼ ê±°ì³ì„œ api í†µì‹ ì„ í•˜ëŠ” ê²ƒì¸ê°€ìš”?

- ê·¸ë¦¬ê³  ì´ë ‡ê²Œ êµ¬ì„±í•˜ê²Œë˜ë©´ next.jsëŠ” route53 - cloud front - s3 ì— ë„£ìœ¼ë©´ ì•ˆë˜ëŠ” ê²ƒì¸ê°€ìš”?

- ì‚¬ì‹¤ ë­ê°€ ë­”ì§€ ì œê°€ ë­˜ ëª¨ë¥´ëŠ”ì§€ë„ ëª¨ë¥´ê² ì–´ì„œ next.js + ìŠ¤í”„ë§ë¶€íŠ¸(api) ì‚¬ìš©í•œë‹¤ê³  ê°€ì •í–ˆì„ë•Œ ì›¹ ì„œë¹„ìŠ¤ êµ¬ì¡°ê°€ ì–´ë–»ê²Œ ê·¸ë ¤ì§€ëŠ”ì§€ ì•Œê³ ì‹¶ìŠµë‹ˆë‹¤.

### A. 

- ë°°í¬ëœ í”„ë¡œì íŠ¸ê°€ Vercelì—ì„œ ì–´ë–»ê²Œ ìš´ì˜ë˜ëŠ”ì§€ ë¯¸ìŠ¤í…Œë¦¬ì˜€ì–´ìš”. ì™œëƒ, Vercelì—ì„œ ëª…í™•í•˜ê²Œ ë‚´ë¶€ì ìœ¼ë¡œ ì–´ë–»ê²Œ ì„œë²„ ì½”ë“œë¥¼ ë™ì‘í•˜ëŠ”ì§€ ë¬¸ì„œí™” í•´ë‘ì§€ ì•Šì•˜ê±°ë“ ìš”.

- ê·¸ëŸ°ë°, ìµœê·¼ì— ì‘ì„±ëœ ì´ ê¸€ì— ì–´ë–»ê²Œ ìš´ì˜ë˜ëŠ”ì§€ ëª…ì‹œí•´ ì£¼ê³  ìˆìŠµë‹ˆë‹¤ :)

- [Framework-defined infrastructure](https://vercel.com/blog/framework-defined-infrastructure#applying-framework-defined-infrastructure)

---

## 5.4 í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸

- í´ë¦­ ì´ë²¤íŠ¸ ì²˜ë¦¬í•˜ëŠ” ê²ƒ ê°™ì´ ì •ë§ í•„ìš”í•œ ë¶€ë¶„ë§Œ ì»´í¬ë„ŒíŠ¸ìœ¼ë¡œ ë§Œë“¤ì–´ì„œ ì²˜ë¦¬í•œë‹¤

- ì•„ë˜ì²˜ëŸ¼ 'use client'ë¥¼ ì„ ì–¸í•´ì£¼ì–´ì•¼ í•œë‹¤

```jsx

'use client'

```

- ê·¸ë ‡ê¸° ë•Œë¬¸ì— í˜ì´ì§€ ì „ì²´ë¥¼ 'use client'ë¥¼ ì„ ì–¸í•´ì£¼ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, ì •ë§ í•„ìš”í•œ ì»´í¬ë„ŒíŠ¸ë§Œ 'use client'ë¥¼ ì„ ì–¸í•´ì£¼ë„ë¡ í•œë‹¤

- src/components í´ë” ë‚´ì— ì»´í¬ë„ŒíŠ¸ë¥¼ ë§Œë“¤ê³ , ì»´í¬ë„ŒíŠ¸ ë‚´ë¶€ì— useState ê°™ì€ hook ë˜ëŠ” ë¸Œë¼ìš°ì € ì´ë²¤íŠ¸ ë¦¬ìŠ¤í„° ê°™ì€ ê²ƒë“¤ì„ ì„ ì–¸í•´ì£¼ëŠ” ê²½ìš°ì—ëŠ” src/appì—ì„œ importí•´ì„œ ë¶ˆëŸ¬ì™€ì„œ ê·¸ëƒ¥ ì‚¬ìš©í•˜ë©´ ì—ëŸ¬ê°€ ë°œìƒí•œë‹¤

- ë”°ë¼ì„œ ì´ë•Œ 'use client'ë¥¼ ì»´í¬ë„ŒíŠ¸ ìƒë‹¨ì— ì„ ì–¸í•´ì„œ í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸ë¼ëŠ” ê²ƒì„ ëª…ì‹œí•´ì£¼ì–´ì•¼ í•œë‹¤.

- í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸ë„ ì •ì ì¸ ë¶€ë¶„ì´ ì„œë²„ì—ì„œ pre-renderingë˜ì§€ë§Œ,

- ëŒ€ì‹  ë Œë”ë§ ë° ì‚¬ìš©ì ì´ë²¤íŠ¸ ì²˜ë¦¬ë¥¼ ìœ„í•œ ì½”ë“œë„ í´ë¼ì´ì–¸íŠ¸(ë¸Œë¼ìš°ì €)ë¡œ ë³´ë‚´ì ¸ì„œ í´ë¼ì´ì–¸íŠ¸ ìƒì—ì„œ ë‹¤ì‹œ í•˜ì´ë“œë ˆì´ì…˜ ëœë‹µë‹ˆë‹¤. 
---

## 5.5 ë™ì‘ ì›ë¦¬ ë¶„ì„ ğŸ˜

- Chapter04 í´ë” íŒŒì¼ì„ ê¸°ì¤€ìœ¼ë¡œ í•œë‹¤

```shell

$ yarn build

```

- ì„œë²„ ì»´í¬ë„ŒíŠ¸, í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸ console.logë¡œ ì‘ì„±ë˜ì–´ ìˆëŠ” ë¶€ë¶„ì´ ëª¨ë‘ ë¹Œë“œ í›„ ë¡œê·¸ë¡œ ì¶œë ¥ì´ ëœë‹¤

- ë„¤íŠ¸ì›Œí¬ íƒ­ì—ì„œ html ë¬¸ì„œ íŒŒì¼ ë³´ë©´, í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸ì— í•´ë‹¹í•˜ëŠ” Counter ë¶€ë¶„ë„ ë¬¸ì„œì— ìˆëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ì´ë‹¤

- ì´ë¥¼ í†µí•´ í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸ê°€ ë¬´ì¡°ê±´ í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œ ë Œë”ë§ ë˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼

  - ì‚¬ìš©ì í´ë¦­ ì²˜ë¦¬ ê°™ì€, ë¸Œë¼ìš°ì €ì—ì„œ ì‹¤í–‰ ë˜ì–´ì•¼ í•˜ëŠ” ì½”ë“œë¥¼ í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸ë¼ê³  í•˜ê³ 

  - í´ë¼ì´ì–¸íŠ¸ì— ë³´ë‚´ì§€ëŠ” ê²ƒì„ í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸ë¼ê³  í•œë‹¤

- html ë¬¸ì„œ íŒŒì¼ì—ì„œ Counter ì¦ê°€ ì‹œí‚¤ê¸° ìœ„í•œ ë²„íŠ¼ ëˆŒëŸ¬ë„ ì•„ë¬´ì¼ë„ ì¼ì–´ë‚˜ì§€ ì•ŠëŠ”ë‹¤

  - ì¦‰, í´ë¦­ ì´ë²¤íŠ¸ëŠ” ì²˜ë¦¬ë˜ì§€ ì•ŠëŠ”ë‹¤

  - í•˜ì´ë“œë ˆì´ì…˜ì´ ì¼ì–´ë‚˜ì•¼ í•œë‹¤.

- app í´ë” ë‚´ì—ì„œ í˜ì´ì§€ ë§Œë“¤ê³  ì„œë²„ ì»´í¬ë„ŒíŠ¸ì™€ í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸ë¡œ ê°ê° ë§Œë“¤ ìˆ˜ ìˆë‹¤

- í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸ë¼ë„ ë¼ë„ ë¹Œë“œë¥¼ í•˜ë©´ ì •ì ìœ¼ë¡œ ë§Œë“¤ ìˆ˜ ìˆëŠ” ë¶€ë¶„ì€ htmlë¡œ ë§Œë“¤ì–´ì„œ ì‚¬ìš©ìì—ê²Œ ë³´ë‚´ì¤€ë‹¤

  - ê·¸ë ‡ê¸° ë•Œë¬¸ì— í„°ë¯¸ë„ì—ì„œ í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸ì— ìˆëŠ” ë¡œê·¸ê°€ ì°íŒ ê²ƒ

  - í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸ë¥¼ ì‹¤í–‰ë˜ê¸° ìœ„í•œ js ì½”ë“œê°€ ë³´ë‚´ì§€ë©´ ê·¸ ë•Œ ì´ë²¤íŠ¸ ê°™ì€ ê²ƒë“¤ì„ ì²˜ë¦¬í•  ìˆ˜ ìˆê²Œ ë˜ëŠ” ê²ƒì´ë‹¤

- ì •ë¦¬í•˜ë©´ v13ì—ì„œëŠ” í˜ì´ì§€ ì „ì²´ ì½”ë“œê°€ ë‹¤ ê°€ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ì„œë²„ ì»´í¬ë„ŒíŠ¸ ë¶€ë¶„ì€ ì„œë²„ì—ì„œ ì‹¤í–‰ë˜ì–´ html ìƒíƒœë¡œ ë‚¨ì•„ìˆê³ 

  - v12 ê¹Œì§€ëŠ” í˜ì´ì§€ ë‹¨ìœ„ë¡œ ì²˜ë¦¬ë¥¼ í•´ì£¼ì—ˆë‹¤

- ì¦‰, í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸ë¥¼ ìœ„í•œ ë¶€ë¶„ì ì¸ ì½”ë“œë§Œ ë³´ë‚´ì§€ëŠ” ê²ƒì´ë‹¤

- ê·¸ë ‡ê¸° ë•Œë¬¸ì— ë²ˆë“¤ì´ë˜ëŠ” js ì½”ë“œë„ ì‘ì•„ì§€ëŠ” ê²ƒ

- htmlë§Œ ë°›ìœ¼ë©´ ê·¸ëƒ¥ html íŒŒì¼ì´ê³  ë¸Œë¼ìš°ì €ì—ì„œ í´ë¦­ì„ í•´ë„ ì²˜ë¦¬ê°€ ë˜ì§€ ì•Šê² ì§€ë§Œ js ì½”ë“œë“¤ì„ ë°›ëŠ” ìˆœê°„, ë¦¬ì•¡íŠ¸ ì»´í¬ë„ŒíŠ¸ë¡œ ë³€í™˜ì´ ë˜ê³  ì´ë²¤íŠ¸ ê°™ì€ ê²ƒë“¤ë„ ì²˜ë¦¬ê°€ ëœë‹¤

- React dev toolsì— ê°€ë©´ ì»´í¬ë„ŒíŠ¸ë“¤ì´ ìˆëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

- SSGê°€ í•„ìš”í•œ ë¶€ë¶„ì€ ì„œë²„ì»´í¬ë„ŒíŠ¸ë¡œ ì‘ì„±.

- ì¦‰, í´ë¼ì´ì–¸íŠ¸ì˜ ë™ì‘ì´ í•„ìš”í•œ ë¶€ë¶„ì€ í´ë¼ì»´í¬ë„ŒíŠ¸ë¡œ ì‘ì„±í•œë‹¤

  - í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸ê°€ ë¸Œë¼ìš°ì ¸ì—ì„œ ì „ë‹¬ëœ í›„ ì ìš©ëœ í˜•íƒœë¥¼ ë“¤ì—¬ë‹¤ ë³´ì•˜ìŠµë‹ˆë‹¤.
    
  - ê·¸ ê³¼ì •ì—ì„œ í´ë¼ì»´í¬ë„ŒíŠ¸ ì „ì²´ê°€ ë‹¤ ë²ˆë“¤ë§ í˜•íƒœì˜ ìë°”í¬ìŠ¤ë¦½íŠ¸ ë°©ì‹ìœ¼ë¡œ ì „ë‹¬ë˜ëŠ”ê²Œ ì•„ë‹ˆë¼,

  - next.jsëŠ” ì§‘ìš”í•˜ê²Œ, ì²˜ìŒ htmlìœ¼ë¡œ ëº¼ ìˆ˜ ìˆëŠ” ë¶€ë¶„ì„ ì°¾ì•„ì„œ í”„ë¦¬ë Œë”ë§í•˜ì—¬ ì¶”ë ¤ë‚¸ë‹¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.



ë”°ë¼ì„œ ë²ˆë“¤ë§ë˜ëŠ” í´ë¼ ì»´í¬ë„ŒíŠ¸ëŠ” ë Œë”ë§ì— ê´€ë ¨í•œ ì½”ë“œëŠ” ì œì™¸ë  ê²ƒì´ë¯€ë¡œ ë²ˆë“¤ë§ íŒŒì¼ì˜ ì´ ìš©ëŸ‰ì´ ì ì–´ì§ˆ ê²ƒ ì„ì„ ê¸°ëŒ€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. "

---

## 5.6 ê³µì‹ ì‚¬ì´íŠ¸ ì½ê¸° âœï¸

- [https://beta.nextjs.org/docs/rendering/fundamentals](https://beta.nextjs.org/docs/rendering/fundamentals)

### Rendering Fundamentals

- Rendering Environments

  - There are two environments where your application code can be rendered: the client and the server.

  - The client refers to the browser on a userâ€™s device that sends a request to a server for your application code. It then turns the response from the server into an interface the user can interact with.

  - The server refers to the computer in a data center that stores your application code, receives requests from a client, does some computation, and sends back an appropriate response.

- Component-level Client and Server Rendering

  - Next.js provided an easier way to break down your application into pages and prerender on the server by generating HTML and sending it to the client to be hydrated by React.

  - However, this led to additional JavaScript needed on the client to make the initial HTML interactive.

  - Now, with Server and Client Components, React can render on the client and the server meaning you can choose the rendering environment at the component level.

  - By default, the app directory uses **Server Components**, allowing you to easily render components on the server and reducing the amount of JavaScript sent to the client.

    - Server Componentsì—ëŠ” í´ë¼ì´ì–¸íŠ¸ì— ë³´ë‚¼ ì½”ë“œê°€ ì—†ê¸° ë•Œë¬¸ì— í´ë¼ì´ì–¸íŠ¸ì— ë³´ë‚´ì§€ëŠ” js íŒŒì¼ í¬ê¸°ë¥¼ ì¤„ì¼ ìˆ˜ ìˆë‹¤

- Server and Client components are rendered differently during Static Rendering:

  - Client Components have their HTML and JSON prerendered and cached on the server.

  - The cached result is then sent to the client for hydration.
    Server Components are rendered on the server by React, and their payload is used to generate HTML.

  - The same rendered payload is also used to hydrate the components on the client, resulting in no JavaScript needed on the client.

- ì„œë²„ ì»´í¬ë„ŒíŠ¸ ì•ˆì—ì„œ í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸, ì„œë²„ ì»´í¬ë„ŒíŠ¸ ê°€ì§ˆ ìˆ˜ ìˆê³ 

- ê·¸ ì•ˆì˜ í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸ ë˜ëŠ” ì„œë²„ ì»´í¬ë„ŒíŠ¸ì—ì„œë„ ë˜ ë‹¤ë¥¸ í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸, ì„œë²„ ì»´í¬ë„ŒíŠ¸ ê°€ì§ˆ ìˆ˜ ìˆë‹¤.

### Server and Client Components

- Server and Client Components allow developers to build applications that span the server and client, combining the rich interactivity of client-side apps with the improved performance of traditional server rendering.

- Why Server Components?

  - Server Components allow developers to better leverage server infrastructure.

  - For example, large dependencies that previously would impact the JavaScript bundle size on the client can instead remain entirely on the server, leading to improved performance.

  - Server Components make writing a React application feel similar to PHP or Ruby on Rails, but with the power and flexibility of React for templating UI.

  - With Server Components, the initial page load is faster, and the client-side JavaScript bundle size is reduced.

  - The base client-side runtime is cacheable and predictable in size, and does not increase as your application grows.

  - Additional JavaScript is only added as client-side interactivity is used in your application through Client Components.

- Client Components

  - Client Components enable you to add client-side interactivity to your application.

  - In Next.js, they are prerendered on the server and hydrated on the client. You can think of Client Components as how components in the Next.js pages/ directory have always worked.

- [ì–¸ì œ Server Component, Client Component ì“°ëŠ”ì§€ - When to use Server and Client Components?](https://nextjs.org/docs/getting-started/react-essentials#why-server-components)

---

## 5.12 ê³µì‹ ì‚¬ì´íŠ¸ ì½ê¸° âœï¸

### Data Fetching Fundamentals

- The Next.js App Router introduces a new, simplified data fetching system built on React and the Web platform.

- This page will go through the fundamental concepts and patterns to help you manage your data's lifecycle.

- Here's a quick overview of the recommendations on this page:

1. Fetch data on the server using Server Components.

2. Fetch data in parallel to minimize waterfalls and reduce loading times.

3. For Layouts and Pages, fetch data where it's used. Next.js will automatically dedupe requests in a tree.

4. Use Loading UI, Streaming and Suspense to progressively render a page and show a result to the user while the rest of the content loads.

- Fetching Data on the Server

  - Whenever possible, we recommend fetching data inside Server Components.

  - Server Components always fetch data on the server. This allows you to:

    - ë¬¸ì„œ ì°¸ê³ 

- [Parallel and Sequential Data Fetching](https://nextjs.org/docs/app/building-your-application/data-fetching/patterns#parallel-and-sequential-data-fetching)

  - ë³‘ë ¬ì ìœ¼ë¡œ ì²˜ë¦¬í•˜ëŠ” ê²ƒì´ ë” ì¢‹ë‹¤

- [Automatic fetch() Request Deduping](https://beta.nextjs.org/docs/data-fetching/fundamentals#component-level-data-fetching)

  - ì—¬ëŸ¬ í˜ì´ì§€ì—ì„œ ì¤‘ë³µì ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” ì»´í¬ë„ŒíŠ¸ ìˆì–´ì„œ ì¤‘ë³µì ëœ ë™ì¼í•œ ìš”ì²­ë˜ë”ë¼ë„ Next.jsì—ì„œ ì•Œì•„ì„œ ìë™ìœ¼ë¡œ ì¤‘ë³µì œê±°ë¥¼ í•´ì„œ ìœ ì¼í•œ ìš”ì²­ í•˜ë‚˜í•˜ë‚˜ë§Œ ë‚¨ê¸´ë‹¤

  - POST requests are not automatically deduplicated.

    - ì£¼ì˜í•  ê²ƒì€ POST ìš”ì³¥ ê°™ì€ ê²½ìš°ì—ëŠ” ì¤‘ë³µ ì œê±°ë¥¼ í•´ì£¼ì§€ ì•ŠëŠ”ë‹¤

--

- Next.js ì‚¬ìš©í•˜ë©´ í’€ìŠ¤íƒ ê°€ëŠ¥í•œë° ì´ê±¸ ê°€ëŠ¥í•˜ê²Œ í•´ì£¼ëŠ” ê²ƒì´ api í´ë”

- ë³„ë„ì˜ ì„œë²„ ì—†ì–´ë„ apiì— ìˆëŠ” í•¨ìˆ˜ë¥¼ vercelì— ë“±ë¡í•˜ë©´ ì„œë²„ì²˜ëŸ¼ ì‘ë™í•œë‹¤

- ì„œë¹„ìŠ¤ì—ì„œ ì œí’ˆì— ëŒ€í•œ ê²ƒ ì½ì–´ì™€ì„œ, í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œ ì½”ë“œì—ì„œ ë°±ì—”ë“œ ì„œë²„ì²˜ëŸ¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤

--

## 5.15 ì»¤ë®¤ë‹ˆí‹°ì— ê¸°ì—¬ í•˜ê¸° ğŸ˜Š

- [Route Handlers](https://beta.nextjs.org/docs/routing/route-handlers)

- ê¸°ì¡´ì—ëŠ” ì´ëŸ°ì‹ìœ¼ë¡œ ì¡°ê±´ë¬¸ìœ¼ë¡œ ì²˜ë¦¬ í•´ì£¼ì–´ì•¼ í–ˆëŠ”ë°

```js
export default function handler(
  req: NextApiRequest,
  res: NextApiResponse<Data>
) {
  if (req.method === 'GET') {
    res.status(200).json({ name: 'John Doe' });
  }
}
```

- ìš”ì²­ë³„ë¡œ í•¨ìˆ˜ë¥¼ ê°œë³„ì ìœ¼ë¡œ ë§Œë“¤ ìˆ˜ ìˆë‹¤

```js
import { NextResponse } from 'next/server';

export async function GET() {
  const res = await fetch('https://data.mongodb-api.com/...', {
    headers: {
      'Content-Type': 'application/json',
      'API-Key': process.env.DATA_API_KEY,
    },
  });
  const data = await res.json();

  return NextResponse.json({ data });
}
```

---

##

- ì•„ë˜ì²˜ëŸ¼ ìµœì‹ ë²„ì „ìœ¼ë¡œ ì—…ë°ì´íŠ¸ í•´ì£¼ì–´ì•¼ í•œë‹¤

```shell

$ yarn add next@canary

```
